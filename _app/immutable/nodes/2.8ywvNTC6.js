const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/editor.main.OTGVkcqe.js","../chunks/preload-helper.CiSkLJYe.js","../chunks/runtime.2kM9MKUx.js","../assets/editor.BsDkeFqO.css"])))=>i.map(i=>d[i]);
import{o as le,b as $,_ as de}from"../chunks/preload-helper.CiSkLJYe.js";import{a as fe,t as pe}from"../chunks/disclose-version.e7KfJPgS.js";import{i as _e}from"../chunks/legacy.Dum5nLzL.js";import{y as Q,a1 as me,h as ge,a2 as he,z as x,a3 as ce,A as ue,B as ve,p as ye,m as l,f as be,t as we,e as Me,W as w,a4 as Ce,a5 as Le,g as ee,s as h,a6 as M,r as te,a7 as je}from"../chunks/runtime.2kM9MKUx.js";import{l as Ae,w as De,e as L}from"../chunks/events.BWSBc2I8.js";function S(n,o,s,p){var _=n.__attributes??(n.__attributes={});ge&&(_[o]=n.getAttribute(o),o==="src"||o==="srcset"||o==="href"&&n.nodeName==="LINK")||_[o]!==(_[o]=s)&&(o==="style"&&"__styles"in n&&(n.__styles={}),o==="loading"&&(n[he]=s),s==null?n.removeAttribute(o):typeof s!="string"&&ne(n).includes(o)?n[o]=s:n.setAttribute(o,s))}function Se(n,o,s){var p=ue,_=ve;Q(null),x(null);try{(Z.has(n.nodeName)||customElements.get(n.tagName.toLowerCase())?ne(n).includes(o):s&&typeof s=="object")?n[o]=s:S(n,o,s==null?s:String(s))}finally{Q(p),x(_)}}var Z=new Map;function ne(n){var o=Z.get(n.nodeName);if(o)return o;Z.set(n.nodeName,o=[]);for(var s,p=n,_=Element.prototype;_!==p;){s=ce(p);for(var C in s)s[C].set&&o.push(C);p=me(p)}return o}function ie(n,o){Ae(window,["resize"],()=>De(()=>o(window[n])))}const ke=!0,Ne=Object.freeze(Object.defineProperty({__proto__:null,prerender:ke},Symbol.toStringTag,{value:"Module"}));function Fe(n){return new Worker(""+new URL("../workers/editor.worker-oRlJJsnX.js",import.meta.url).href,{name:n==null?void 0:n.name})}var Te=pe(`<py-script>from pathfinding.core.grid import Grid
from pyodide.ffi import create_proxy, to_js
from js import grid_to_py, update_path
import js

def find_path(evt):
    data = grid_to_py().as_object_map(hereditary=True)
    grid = Grid(matrix=list(data['matrix']))
    start = grid.node(data['start'][0], data['start'][1])
    end = grid.node(data['end'][0], data['end'][1])
    _locals = locals()
    _globals = globals()
    exec(data['py_code'], _globals, _locals)
    if 'path' not in _locals or not _locals['path']:
        print('no path found')
        return
    path = _locals['path']
    _nodes = _locals['grid'].nodes
    update_path(
      to_js([[node.x, node.y] for node in path]),
      to_js(_nodes)
    )


find_path_proxy = add_one_proxy = create_proxy(find_path)
run_code_btn = js.document.getElementById('run_code')
run_code_btn.addEventListener("click", find_path_proxy)</py-script> <div class="monaco_editor"></div> <canvas></canvas> <div class="scenario-select"><select><option selected>A*</option><option>Dijkstra</option><option>Best First</option><option>Bi-directional A*</option><option>Breadth First Search (BFS)</option><option>Iterative Deeping A* (IDA*)</option><option>Minimum Spanning Tree (MSP)</option></select></div> <div class="fabs" role="group" aria-label="Floating action buttons"><button id="run_code" class="fab" title="Run code" aria-label="Run code"><svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" stroke="none" d="M3.7242 8.45192L7.28876 7.19383C6.55281 8.18469 5.92055 9.24884 5.40213 10.3696L3.7242 8.45192ZM1.24742 8.6585L4.54987 12.4327L4.07152 13.6286C3.92296 14 4.01003 14.4242 4.29289 14.7071L4.60651 15.0207C2.90342 16.9411 1.9627 18.9496 1.05132 21.6838C0.931539 22.0431 1.02506 22.4393 1.29289 22.7071C1.56073 22.9749 1.95689 23.0685 2.31623 22.9487C5.05037 22.0373 7.05889 21.0966 8.97928 19.3935L9.29289 19.7071C9.57576 19.99 9.99997 20.077 10.3714 19.9285L11.5673 19.4501L15.3415 22.7526C15.5911 22.971 15.9327 23.0514 16.2535 22.9673C16.5744 22.8832 16.8326 22.6456 16.943 22.3328L19.9291 13.8722C21.8977 11.5428 23 8.57479 23 5.48078V2C23 1.44772 22.5523 1 22 1H18.5192C15.4252 1 12.4572 2.10225 10.1278 4.0709L1.66718 7.05701C1.35444 7.16739 1.11676 7.42565 1.03268 7.74646C0.948589 8.06728 1.02903 8.40891 1.24742 8.6585ZM3.68527 20.3147C4.31277 18.7992 5.017 17.5929 6.02356 16.4378L7.56223 17.9764C6.40713 18.983 5.20083 19.6872 3.68527 20.3147ZM10.2408 17.8266L9.70711 17.2929L6.70711 14.2929L6.17337 13.7592L6.88327 11.9844C7.53465 10.356 8.44936 8.84567 9.59079 7.51401L10.1674 6.84129C12.2572 4.40319 15.308 3 18.5192 3H21V5.48078C21 8.69196 19.5968 11.7428 17.1587 13.8326L16.486 14.4092C15.1543 15.5506 13.644 16.4653 12.0156 17.1167L10.2408 17.8266ZM15.5481 20.2758L13.6304 18.5979C14.7512 18.0795 15.8153 17.4472 16.8062 16.7112L15.5481 20.2758ZM15 8C15 7.44772 15.4477 7 16 7C16.5523 7 17 7.44772 17 8C17 8.55228 16.5523 9 16 9C15.4477 9 15 8.55228 15 8ZM16 5C14.3431 5 13 6.34315 13 8C13 9.65685 14.3431 11 16 11C17.6569 11 19 9.65685 19 8C19 6.34315 17.6569 5 16 5Z"></path></svg></button></div>`,3);function Pe(n,o){ye(o,!1);const s=1,p=0,_=-2,C=-3,i=20;let m=[],y=[[]],g=-1,G=M(0),z=M(0),b=0,v=0,d=[-1,-1],f=[-1,-1],r=[[s]],k=M(),c=M(),j=M(),H;const O={a_star:["from pathfinding.finder.a_star import AStarFinder","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = AStarFinder(diagonal_movement=DiagonalMovement.always)"].join(`
`),dijkstra:["from pathfinding.finder.dijkstra import DijkstraFinder","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = DijkstraFinder(diagonal_movement=DiagonalMovement.always)"].join(`
`),best_first:["from pathfinding.finder.best_first import BestFirst","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = BestFirst(diagonal_movement=DiagonalMovement.always)"].join(`
`),bi_a_star:["from pathfinding.finder.bi_a_star import BiAStarFinder","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = BiAStarFinder(diagonal_movement=DiagonalMovement.always)"].join(`
`),breadth_first:["from pathfinding.finder.breadth_first import BreadthFirstFinder","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = BreadthFirstFinder(diagonal_movement=DiagonalMovement.always)"].join(`
`),ida_star:["# WARNING! This might be very slow on larger paths and might crash your browser!","from pathfinding.finder.ida_star import IDAStarFinder","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = IDAStarFinder(diagonal_movement=DiagonalMovement.always)"].join(`
`),msp:["from pathfinding.finder.msp import MinimumSpanningTree","from pathfinding.core.diagonal_movement import DiagonalMovement","","finder = MinimumSpanningTree(diagonal_movement=DiagonalMovement.always)"].join(`
`)};let F=M(["# Here you can test python-pathfinding directly.","# Press the rocket ðŸš€ in the bottom right to execute this code.",'# The variables "grid", "matrix", "start" and "end" are already defined by the',"# interactive grid on the left, but you can overwrite it here if you want.","# It runs in your local browser using pyscript, there's no save!","# If your code does not run take a look at the browsers console for errors.",'# You need to provide a variable "path" with points on the map to draw the path on the map',O.a_star,"path, runs = finder.find_path(start, end, grid)"].join(`
`));function V(){if(v=Math.floor(l(c).height/i),b=Math.floor(l(c).width/i),r.length<v){const e=v-r.length;if(e<1)r=r.slice(0,v);else for(let t=0;t<e;t++)r.push([])}for(let e=0;e<r.length;e++){const t=b-r[e].length;if(t<1)r[e]=r[e].slice(0,b);else for(let a=0;a<t;a++)r[e].push(s)}(f[0]>b-1||f[1]>v-1||f[0]<0||f[1]<0)&&(f=[b-1,v-1]),(d[0]>b||d[1]>v||d[0]<0||d[1]<0)&&(d=[0,0])}function oe(){V()}function T(e){if(!l(c)){requestAnimationFrame(()=>{T(e)});return}if(r.length<=1&&V(),e.lineWidth=1,e.clearRect(0,0,l(c).width,l(c).height),y.length>0)for(let t=0;t<y.length;t++)for(let a=0;a<y[t].length;a++)y[t][a].opened&&(e.fillStyle="#cccccc",e.fillRect(a*i,t*i,i,i));if(m.length>1){e.strokeStyle="darkred",e.beginPath(),e.moveTo(m[0][0]*i+i/2+.5,m[0][1]*i+i/2+.5);for(let t=1;t<m.length;t++)t<m.length-1&&(e.fillStyle="#ff9a4b",e.fillRect(m[t][0]*i,m[t][1]*i,i,i)),e.lineTo(m[t][0]*i+i/2+.5,m[t][1]*i+i/2+.5);e.stroke()}e.fillStyle="gray";for(let t=0;t<r.length;t++)for(let a=0;a<r[t].length;a++)r[t][a]<=0&&e.fillRect(a*i,t*i,i,i);e.fillStyle="green",e.fillRect(d[0]*i,d[1]*i,i,i),e.fillStyle="red",e.fillRect(f[0]*i,f[1]*i,i,i);{e.strokeStyle="black";for(let t=0;t<r[0].length+1;t++)e.beginPath(),e.moveTo(t*i+.5,0),e.lineTo(t*i+.5,r.length*i),e.stroke();for(let t=0;t<r.length+1;t++)e.beginPath(),e.moveTo(0,t*i+.5),e.lineTo(r[0].length*i,t*i+.5),e.stroke()}requestAnimationFrame(()=>{T(e)})}le(async()=>{self.MonacoEnvironment={getWorker(t){return new Fe}},H=await de(()=>import("../chunks/editor.main.OTGVkcqe.js").then(t=>t.e),__vite__mapDeps([0,1,2,3]),import.meta.url),w(j,H.editor.create(l(k),{value:l(F),language:"python",minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1}));const e=l(c).getContext("2d");return e&&(await Ce(),requestAnimationFrame(()=>{T(e)})),()=>{l(j).dispose()}});function ae(e){const t=Math.floor((e.clientX-8)/i),a=Math.floor((e.clientY-8)/i);if(d&&d[0]==t&&d[1]==a){g=_;return}if(f&&f[0]==t&&f[1]==a){g=C;return}g=r[a][t]===p?s:p,r[a][t]=g}function re(e){if(g===-1)return;const t=Math.floor((e.clientX-8)/i),a=Math.floor((e.clientY-8)/i);if(g===_){d=[t,a];return}if(g===C){f=[t,a];return}r[a][t]=g}function se(){g=-1}globalThis.grid_to_py=()=>({matrix:r,start:d,end:f,py_code:l(j).getValue()}),globalThis.update_path=(e,t)=>{m=e;for(let a=0;a<t.length;a++){y[a]=[];let U=Array.from(t[a]);for(let A=0;A<U.length;A++){const D=U[A];y[a][A]={f:D.f,opened:D.opened||D.closed||D.tested||!1}}}},_e();var Y=Te();L("resize",Le,oe);var q=be(Y);Se(q,"config","./pyscript.json");var X=h(q,2);$(X,e=>w(k,e),()=>l(k));var u=h(X,2);S(u,"style","top: 8px; left: 8px; position: absolute"),$(u,e=>w(c,e),()=>l(c));var J=h(u,2),B=ee(J),R=ee(B);R.value=(R.__value="a_star")==null?"":"a_star";var I=h(R);I.value=(I.__value="dijkstra")==null?"":"dijkstra";var E=h(I);E.value=(E.__value="best_first")==null?"":"best_first";var W=h(E);W.value=(W.__value="bi_a_star")==null?"":"bi_a_star";var N=h(W);N.value=(N.__value="breadth_first")==null?"":"breadth_first";var P=h(N);P.value=(P.__value="ida_star")==null?"":"ida_star";var K=h(P);K.value=(K.__value="msp")==null?"":"msp",te(B),te(J),je(2),we(()=>{S(u,"width",l(G)/2-16),S(u,"height",l(z)-16)}),ie("innerHeight",e=>w(z,e)),ie("innerWidth",e=>w(G,e)),L("pointerdown",u,ae),L("pointermove",u,re),L("pointerup",u,se),L("change",B,e=>{var t;w(F,O[(t=e==null?void 0:e.target)==null?void 0:t.value]),l(j).setValue(l(F)+`
path, runs = finder.find_path(start, end, grid)`)}),fe(n,Y),Me()}export{Pe as component,Ne as universal};
